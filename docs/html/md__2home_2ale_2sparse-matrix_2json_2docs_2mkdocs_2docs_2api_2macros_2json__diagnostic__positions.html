<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Spase Matrix: JSON_DIAGNOSTIC_POSITIONS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Spase Matrix<span id="projectnumber">&#160;v0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">JSON_DIAGNOSTIC_POSITIONS</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1185"></a> </p><div class="fragment"><div class="line"><span class="preprocessor">#define JSON_DIAGNOSTIC_POSITIONS </span><span class="comment">/* value */</span><span class="preprocessor"></span></div>
</div><!-- fragment --><p>This macro enables position diagnostics for generated JSON objects.</p>
<p>When enabled, two new member functions <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2start__pos.html">`start_pos()`</a> and <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2end__pos.html">`end_pos()`</a> are added to <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2index.html">`basic_json`</a> values. If the value was created by calling the<a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2parse.html">`parse`</a> function, then these functions allow querying the byte positions of the value in the input it was parsed from. In case the value was constructed by other means, <code>std::string::npos</code> is returned.</p>
<p><a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2start__pos.html">`start_pos()`</a> returns the position of the first character of a given value in the original JSON string, while <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2end__pos.html">`end_pos()`</a> returns the position of the character <em>following</em> the last character. For objects and arrays, the first and last characters correspond to the opening or closing braces/brackets, respectively. For primitive values, the first and last character represents the opening and closing quotes (strings) or the first and last character of the field's numerical or predefined value (<code>true</code>, <code>false</code>, <code>null</code>), respectively.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">JSON type   </th><th class="markdownTableHeadNone">return value <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2start__pos.html">`start_pos()`</a>   </th><th class="markdownTableHeadNone">return value <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2end__pos.html">`end_pos()`</a>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">object   </td><td class="markdownTableBodyNone">position of the opening <code>{</code>   </td><td class="markdownTableBodyNone">position after the closing <code>}</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">array   </td><td class="markdownTableBodyNone">position of the opening <code>[</code>   </td><td class="markdownTableBodyNone">position after the closing <code>]</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">string   </td><td class="markdownTableBodyNone">position of the opening <code>"</code>   </td><td class="markdownTableBodyNone">position after the closing <code>"</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">number   </td><td class="markdownTableBodyNone">position of the first character   </td><td class="markdownTableBodyNone">position after the last character    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">boolean   </td><td class="markdownTableBodyNone">position of <code>t</code> for <code>true</code> and <code>f</code> for <code>false</code>   </td><td class="markdownTableBodyNone">position after <code>e</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">null   </td><td class="markdownTableBodyNone">position of <code>n</code>   </td><td class="markdownTableBodyNone">position after <code>l</code>   </td></tr>
</table>
<p>Given the above, <a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2end__pos.html">`end_pos()`</a><code>-</code><a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2basic__json_2start__pos.html">`start_pos()`</a> for a JSON value provides the length of the parsed JSON string for that value, including the opening or closing braces, brackets, or quotes.</p>
<p>Note that enabling this macro increases the size of every JSON value by two <code>std::size_t</code> fields and adds slight runtime overhead to parsing, copying JSON value objects, and the generation of error messages for exceptions. It also causes these values to be reported in those error messages.</p>
<h1><a class="anchor" id="autotoc_md1186"></a>
Default definition</h1>
<p>The default value is <code>0</code> (position diagnostics are switched off).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define JSON_DIAGNOSTIC_POSITIONS 0</span></div>
</div><!-- fragment --><p>When the macro is not defined, the library will define it to its default value.</p>
<h1><a class="anchor" id="autotoc_md1187"></a>
Notes</h1>
<p>!!! note "CMake option" </p><pre class="fragment">Diagnostic positions can also be controlled with the CMake option
[`JSON_Diagnostic_Positions`](../../integration/cmake.md#json_diagnostic_positions) (`OFF` by default)
which defines `JSON_DIAGNOSTIC_POSITIONS` accordingly.
</pre><p> !!! note "Availability" </p><pre class="fragment">Diagnostic positions are only available if the value was created by the [`parse`](../basic_json/parse.md) function.
The [`sax_parse`](../basic_json/sax_parse.md) function or all other means to create a JSON value **do not** set the
diagnostic positions and [`start_pos()`](../basic_json/start_pos.md) and [`end_pos()`](../basic_json/end_pos.md)
will only return `std::string::npos` for these values.
</pre><p> !!! warning "Invalidation" </p><pre class="fragment">The returned positions are only valid as long as the JSON value is not changed. The positions are *not* updated
when the JSON value is changed.
</pre> <h1><a class="anchor" id="autotoc_md1188"></a>
Examples</h1>
<p>??? example "Example: retrieving positions" </p><pre class="fragment">```cpp
--8&lt;-- "examples/diagnostic_positions.cpp"
```

Output:

```
--8&lt;-- "examples/diagnostic_positions.output"
```

The output shows the start/end positions of all the objects and fields in the JSON string.
</pre><p> ??? example "Example 2: using only diagnostic positions in exceptions" </p><pre class="fragment">```cpp
--8&lt;-- "examples/diagnostic_positions_exception.cpp"
```

Output:

```
--8&lt;-- "examples/diagnostic_positions_exception.output"
```

    The output shows the exception with start/end positions only.
</pre><p> ??? example "Example 3: using extended diagnostics with positions enabled in exceptions" </p><pre class="fragment">```cpp
--8&lt;-- "examples/diagnostics_extended_positions.cpp"
```

Output:

```
--8&lt;-- "examples/diagnostics_extended_positions.output"
```

    The output shows the exception with diagnostic path info and start/end positions.
</pre> <h1><a class="anchor" id="autotoc_md1189"></a>
See also</h1>
<ul>
<li><a href="../../integration/cmake.md#json_diagnostic_positions">:simple-cmake: JSON_Diagnostic_Positions</a> - CMake option to control the macro</li>
<li><a class="el" href="md__2home_2ale_2sparse-matrix_2json_2docs_2mkdocs_2docs_2api_2macros_2json__diagnostics.html">JSON_DIAGNOSTICS</a> - macro to control extended diagnostics</li>
</ul>
<h1><a class="anchor" id="autotoc_md1190"></a>
Version history</h1>
<ul>
<li>Added in version 3.12.0. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
